CREATE TABLE Merchandise(
	MerID CHAR(8) NOT NULL,
	Price Number NOT NULL,
	Title VARCHAR(30) NOT NULL,
	PubID CHAR(8) NOT NULL,
	Amount INT NOT NULL,
	PRIMARY KEY(MerID),
	FOREIGN KEY(PubID) REFERENCES Publisher(PubID)
);

CREATE TABLE Books(
	MerID CHAR(8) NOT NULL,
	ISBN CHAR(13) NOT NULL,
	Category VARCHAR(30) NOT NULL,
	PRIMARY KEY(MerID),
	FOREIGN KEY(MerID) REFERENCES Merchandise(MerID)
);

CREATE TABLE BookAuthors(
	MerID CHAR(8) NOT NULL,
	Author VARCHAR(30) NOT NULL,
	PRIMARY KEY(MerID, Author),
	FOREIGN KEY(MerID) REFERENCES Books(MerID)
);

CREATE TABLE CDs(
	MerID CHAR(8) NOT NULL,
	Genre VARCHAR(30) NOT NULL,
	PRIMARY KEY(MerID),
	FOREIGN KEY(MerID) REFERENCES Merchandise(MerID)
);

CREATE TABLE CDArtists(
	MerID CHAR(8) NOT NULL,
	Artist VARCHAR(30) NOT NULL,
	PRIMARY KEY(MerID, Artist),
	FOREIGN KEY(MerID) REFERENCES CDs(MerID)
);

CREATE TABLE Warehouse(
	WareID CHAR(8) NOT NULL,
	Capacity INT NOT NULL DEFAULT 5000000,
	State VARCHAR(30) NOT NULL,
	City VARCHAR(30) NOT NULL,
	Street VARCHAR(30) NOT NULL,
	ZIP CHAR(5) NOT NULL,
	PRIMARY KEY(WareID)
);

CREATE TABLE StoreIn(
	MerID CHAR(8) NOT NULL,
	WareID CHAR(8) NOT NULL,
	StoreAmount INT NOT NULL,
	PRIMARY KEY(MerID, WareID),
	FOREIGN KEY(MerID) REFERENCES Merchandise(MerID),
	FOREIGN KEY(WareID) REFERENCES Warehouse(WareID)
);

CREATE TABLE Publisher(
	PubID CHAR(8) NOT NULL,
	Pname VARCHAR(30) NOT NULL,
	Phone CHAR(10) NOT NULL,
	State VARCHAR(30) NOT NULL,
	City VARCHAR(30) NOT NULL,
	Street VARCHAR(30) NOT NULL,
	ZIP CHAR(5) NOT NULL,
	PRIMARY KEY (PubID)
);

CREATE TABLE StaffPurchase(
	TransID CHAR(8) NOT NULL,
	MerID CHAR(8) NOT NULL,
	Account CHAR(8) NOT NULL,
	Amount INT NOT NULL,
	SDate DATE, 
	PRIMARY KEY (TransID),
	FOREIGN KEY (MerID) REFERENCES Merchandise(MerID),
	FOREIGN KEY (Account) REFERENCES User(Account)
);

CREATE TABLE CustomerBuy(
	TransID CHAR(8) NOT NULL,
	MerID CHAR(8) NOT NULL,
	Account CHAR(8) NOT NULL,
	Amount INT NOT NULL,
	CDate DATE, 
	PRIMARY KEY (TransID),
	FOREIGN KEY (MerID) REFERENCES Merchandise(MerID),
	FOREIGN KEY (Account) REFERENCES User(Account)
);

CREATE TABLE User(
	Account CHAR(8) NOT NULL,
	Pwd VARCHAR(30) NOT NULL,
	Name VARCHAR(30),
	Email VARCHAR(30) NOT NULL,
	Gender CHAR(1),
	StaffFlag BOOLEAN NOT NULL,
	Salary INT,
	SSN CHAR(9),
	CustomerFlag BOOLEAN NOT NULL,
	Phone CHAR(10),
	Savings INT DEFAULT 0,
	Address VARCHAR(50),
	PRIMARY KEY (Account)
);

